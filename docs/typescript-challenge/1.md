æœ€è¿‘åœ¨ Github ä¸Šå‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„é¡¹ç›® [type-challenges](https://github.com/type-challenges/type-challenges "type-challenges")ï¼Œå®ƒæ˜¯ TypeScript ç±»å‹ä½“æ“å§¿åŠ¿åˆé›†ï¼Œæä¾›äº†å¸¸ç”¨çš„ä¸€ç™¾å¤šä¸ªå·¥å…·ç±»å‹ playgroundï¼Œå¯ä»¥è®©æˆ‘ä»¬åƒç©æ¸¸æˆä¸€æ ·è¿›è¡Œé€šå…³å¤§æŒ‘æˆ˜ã€‚

![é¢˜ç›®åˆé›† - 2.16 ä¸‡ star](./public/all-challenges.png)

å…¶ä¸­æœ‰ä¸€äº›æ˜¯ TypeScript å†…ç½®çš„å·¥å…·ç±»å‹ï¼Œä¾‹å¦‚ [`Pick / Readonly / Exclude`](https://www.typescriptlang.org/docs/handbook/utility-types.html "`Pick / Readonly / Exclude`") ç­‰ï¼Œå‰©ä½™ç»å¤§éƒ¨åˆ†åˆ™æ˜¯ä¸€äº›å¸¸ç”¨ä½†æœªå®˜æ–¹å®ç°çš„ï¼Œä¾‹å¦‚ `Deep Readonly / Trim / Capitalize` ç­‰ã€‚

ç¬”è€…è®¡åˆ’æ¯å‘¨å®ç° 3-6 ä¸ªå·¥å…·ç±»å‹ï¼Œå¹¶é€šè¿‡æ–‡ç« æ²‰æ·€åˆ†äº«ï¼Œé¡ºåˆ©çš„è¯ 6 ä¸ªæœˆå¯ä»¥é€šå…³å®Œæˆï¼Œå¸Œæœ›é€šè¿‡è¿™ä¸€ç³»åˆ—çš„æŒ‘æˆ˜ï¼Œèƒ½åŠ æ·±æˆ‘å’Œå¤§å®¶å¯¹ TypeScript çš„ç†è§£ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶å¤šå¤šç›‘ç£ ğŸ˜„ã€‚

## 1. å®ç° Pick

### æŒ‘æˆ˜å†…å®¹

å®ç° TypeScript å†…ç½®çš„ `Pick<T, K>`ï¼Œä»ç±»å‹ T ä¸­é€‰æ‹©å‡ºå±æ€§ Kï¼Œæ„æˆä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š

```ts
// TODO: è¡¥å…… MyPick ä»£ç 
type MyPick<T, K> = any;

interface Todo {
  title: string
  description: string
  completed: boolean
}

type TodoPreview = MyPick<Todo, 'title' | 'completed'>

const todo: TodoPreview = {
    title: 'Clean room',
    completed: false,
}
```

> çŸ¥è¯†ç‚¹ï¼š`keyof / in / extends`ã€‚

### é¢˜ç›®è§£æ

ä¸ºäº†ä»ç±»å‹ T ä¸­æŒ‘å‡ºå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `keyof` è·å–å¯¹è±¡å…¨éƒ¨çš„é”®åï¼Œä¾‹å¦‚ï¼š

```ts
interface Student {
  name: string;
  age: number;
}

type StudentKeys = keyof Student;
// StudentKeys: 'name' | 'age'
```

é€šè¿‡ `keyof` è·å–åˆ°çš„ `'name' | 'age'` è¿™æ ·é€šè¿‡ `|` åˆ†å‰²çš„ç±»å‹é›†åˆï¼Œç§°ä¹‹ä¸º**è”åˆç±»å‹ï¼ˆunion typeï¼‰**ï¼Œè¡¨ç¤ºå–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§ã€‚

è”åˆç±»å‹çš„ç»§æ‰¿æ¯”è¾ƒç‹¬ç‰¹ï¼Œä¾‹å¦‚ `name` ç®—æ˜¯ç»§æ‰¿äº `'name' | 'age'`ï¼Œè€Œä¸æ˜¯ç›¸åï¼Œæ›´å¤šä¾‹å­å¯ä»¥å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š

```ts
type X = 'a' | 'b' | 'c';
type Y = 'a' | 'b';
type Z = 'a';

type isZExtendsY = Z extends Y ? true : false;
// isZExtendsY: true

type isYExtendsX = Y extends X ? true : false;
// isYExtendsX: true
```

åŒæ—¶ï¼Œå¯¹äºè”åˆç±»å‹ï¼Œå¯ä»¥é€šè¿‡ `in` å–å®ƒå¯èƒ½çš„å€¼ï¼Œä»è€Œæ„å»ºä¸€ä¸ªå¯¹è±¡ï¼š

```ts
type nameKeys = 'firstname' | 'lastname'

type FullName = {
  [key in nameKeys]: string;
}
// FullName: { firstname: string, lastname: string }
```

### é¢˜ç›®ç­”æ¡ˆ

äº†è§£äº† `keyof / extends / in` ä¸‰ä¸ªå…³é”®è¯çš„ä½œç”¨åï¼Œé¢˜ç›®å°±æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥åšå‡ºå¦‚ä¸‹ç­”æ¡ˆï¼š

```ts
type MyPick<T, K extends keyof T> = {
  [P in K]: T[P]
}
```

## 2. å®ç° Readonly

### æŒ‘æˆ˜å†…å®¹

å®ç° TypeScript å†…ç½®çš„ `Readonly<T>`ï¼Œæ¥æ”¶ä¸€ä¸ªæ³›å‹å‚æ•° Tï¼Œå¹¶è¿”å›ä¸€ä¸ªå®Œå…¨ä¸€æ ·çš„ç±»å‹ï¼Œåªæ˜¯æ‰€æœ‰å±æ€§éƒ½ä¼šè¢« readonly æ‰€ä¿®é¥°ã€‚

ä¹Ÿå°±æ˜¯è¯´ä¸å¯ä»¥å†å¯¹è¯¥å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œä¾‹å¦‚ï¼š

```ts
// TODO: è¡¥å…… MyReadonly ä»£ç 
type MyReadonly<T> = any;

interface Todo {
  title: string
  description: string
}

const todo: MyReadonly<Todo> = {
  title: "Hey",
  description: "foobar"
}

// æŠ¥é”™ï¼Œä¸èƒ½å¯¹ readonly å­—æ®µé‡æ–°èµ‹å€¼
todo.title = "Hello";
```

> çŸ¥è¯†ç‚¹ï¼š`keyof / in / readonly`ã€‚

### é¢˜ç›®è§£æ

å’Œç¬¬ä¸€é¢˜ **å®ç° Pick** æ¯”è¾ƒç±»ä¼¼ï¼Œéƒ½éœ€è¦éå†å¯¹è±¡çš„å±æ€§ï¼Œæ‰€ä»¥å¯ä»¥æƒ³åˆ°ä½¿ç”¨ `in / keyof`ï¼Œä¸è¿‡æ–°å¢çš„ `readonly` å…ˆä»‹ç»ä¸€ä¸‹ã€‚

`readonly` çš„åŠŸèƒ½å¦‚åŒå…¶åï¼Œè®©å®ƒä¿®é¥°çš„å˜é‡æ— æ³•è¢«æ”¹å˜ï¼š

```ts
interface Student {
  readonly name: string;
  age: number;
}

const elvinn: Student = {
  name: 'elvin',
  age: 26,
};

// é”™è¯¯ï¼Œä¸èƒ½ä¿®æ”¹ readonly å±æ€§
elvinn.name = 'elvinnnn';

// ok
elvin.age = 27;
```

å¸¸å¸¸è¢«è®¨è®ºçš„ä¸€ä¸ªé—®é¢˜æ˜¯ `const` å’Œ `readonly` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæˆ‘è®¤ä¸ºä¸»è¦æ˜¯ä¸¤ç‚¹å·®å¼‚ï¼š

|          | ä½œç”¨å¯¹è±¡ | æ£€æŸ¥æœºåˆ¶          |
| -------- | -------- | ----------------- |
| const    | å˜é‡     | ç¼–è¯‘ & è¿è¡Œæ—¶æ£€æŸ¥ |
| readonly | å±æ€§     | ä»…ç¼–è¯‘æ—¶æ£€æŸ¥      |

å¦å¤–è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹å°±æ˜¯æ•°ç»„çš„åœºæ™¯ï¼Œåœ¨å¦‚ä¸‹çš„ä»£ç ä¸­ï¼Œè™½ç„¶å£°æ˜äº† `const array`ï¼Œä½†å®é™…ä¸Šè¿˜æ˜¯èƒ½å¯¹ array çš„å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œä¸å˜çš„åªæ˜¯å®ƒä¸èƒ½æŒ‡å‘å…¶å®ƒæ•°ç»„ï¼š

```ts
const array = [1, 2];

array[0] = 0;     // ok
array.push(3);    // ok
array = [1];      // é”™è¯¯ï¼Œä¸èƒ½æŒ‡å‘å…¶å®ƒæ•°ç»„
```

å¦‚æœä¸å¸Œæœ›æ•°ç»„çš„å†…å®¹å‘ç”Ÿä¿®æ”¹çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ `readonly` æˆ–è€… `as const`ï¼š

```ts
const array1: readonly number[] = [1, 2];
const array2 = [3, 4] as const;

array1[0] = 0; // error
array2.push(3); // error
```

### é¢˜ç›®ç­”æ¡ˆ

é€šè¿‡ `in / keyof` éå†å¯¹è±¡å±æ€§ï¼Œå†ä½¿ç”¨ `readonly` ä¿®é¥°å±æ€§ä½¿å…¶ä¸å¯å˜ï¼Œæ‰€ä»¥ç­”æ¡ˆå¦‚ä¸‹ï¼š

```ts
type MyReadonly<T> = {
  readonly [key in keyof T]: T[key]
}
```

> æ³¨æ„ï¼šä¸è®ºæ˜¯ `MyReadonly`ï¼Œè¿˜æ˜¯ TypeScript å†…ç½®çš„ `Readonly`ï¼Œéƒ½åªæ˜¯å¯¹ç¬¬ä¸€å±‚å±æ€§ç”Ÿæ•ˆï¼Œè€Œå¯¹äºå†…éƒ¨æ·±å±‚æ¬¡çš„å±æ€§ï¼Œå¹¶ä¸ä¼šç”Ÿæ•ˆï¼Œå¤§å®¶å¯ä»¥æƒ³æƒ³æ€ä¹ˆå®ç° `Deep Readonly`ï¼Œæˆ‘ä»¬åç»­ä¼šè¿›è¡ŒæŒ‘æˆ˜ã€‚

```ts
interface Foo {
  bar: {
    time: number;
  };
}

const foo: Readonly<Foo> = {
  bar: { time: 0 }
};

// okï¼Œä¿®æ”¹ bar.time ä¸ä¼šæŠ¥é”™
foo.bar.time = 1;
```

## 3. å…ƒç»„è½¬æ¢ä¸ºå¯¹è±¡

### æŒ‘æˆ˜å†…å®¹

ä¼ å…¥ä¸€ä¸ªå…ƒç»„ç±»å‹ï¼Œå°†å…¶è½¬æ¢ä¸ºå¯¹è±¡ç±»å‹ï¼Œè¿™ä¸ªå¯¹è±¡ç±»å‹çš„é”®/å€¼éƒ½æ˜¯ä»å…ƒç»„ä¸­éå†å‡ºæ¥ï¼Œä¾‹å¦‚ï¼š

```ts
// TODO: è¡¥å…… TupleToObject ä»£ç 
type TupleToObject<T extends readonly any[]> = {};

const tuple = ['model 3', 'model Y'] as const;

type result = TupleToObject<typeof tuple>
// result ä¸º { 'model 3': ''model 3', ''model Y': 'model Y' }
```

> çŸ¥è¯†ç‚¹ï¼š`Tuple[number] / in`ã€‚

### é¢˜ç›®è§£æ

æ‰€è°“ **å…ƒç»„ï¼ˆtupleï¼‰** å°±æ˜¯äº‹å…ˆå®šä¹‰å¥½ç±»å‹å’Œé•¿åº¦çš„æ•°ç»„ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ¸…æ¥šåœ°äº†è§£æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„ç±»å‹ï¼š

```ts
// å…ƒç´ éƒ½æ˜¯åŒä¸€ç±»å‹
const tuple1: [number, number] = [1, 2];

// å…ƒç´ å¯ä»¥æ˜¯ä¸åŒç±»å‹
let tuple2: [number, string, boolean];
tuple2 = [1, 'hello', true];
```

è®¸å¤šäººå¯èƒ½è¯¯ä»¥ä¸ºå…ƒç»„ç±»å‹çš„å˜é‡æ— æ³•å†ç»§ç»­æ·»åŠ å…ƒç´ ï¼Œä½†å…¶å®åªè¦æ·»åŠ çš„å…ƒç´ ç±»å‹å±äºå£°æ˜ä¸­å…è®¸çš„ç±»å‹éƒ½æ˜¯å¯ä»¥çš„ï¼š

```ts
let tuple2: [number, string, bool];
tuple2 = [1, 'hello', true];

tuple2.push(2); // ok
tuple2.push('hi'); // ok
tuple2.push(false); // ok

tuple2.push({}); // error
```

æ‰€ä»¥ä¸€èˆ¬åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¼šé€šè¿‡å¦‚ä¸‹ä¸¤ç§æ–¹å¼è®¾ç½®å…ƒç»„ä¸å¯å˜ï¼š

```ts
// æ–¹å¼ä¸€ï¼šä½¿ç”¨ readonly
const tuple1: readonly [number, string] = [1, 'hello'];

// æ–¹å¼äºŒï¼šä½¿ç”¨ as constï¼ˆæ›´æ¨èï¼Œæ›´ç®€æ´ï¼‰
const tuple2 = [1, 'hello'] as const;
```

åšè¿™ä¸ªé¢˜ç›®çš„å…³é”®æ˜¯éœ€è¦çŸ¥é“å¯ä»¥é€šè¿‡**æ•°ç»„ä¸‹æ ‡çš„æ–¹å¼è·å–å…ƒç»„å…ƒç´ çš„ç±»å‹**ï¼Œä¸¾ä¸ªä¾‹å­ï¼š

```ts
const tuple = [1, 'hello'] as const;

// Item0: 1
type Item0 = (typeof tuple)[0];

// Item1: 'hello'
type Item1 = (typeof tuple)[1];

// ItemInTuple: 1 | 'hello'
type ItemInTuple = (typeof tuple)[number];
```

å¯¹äºæœ€åä¸€è¡Œï¼Œ`(typeof tuple)[number]` è·å–åˆ°çš„æ˜¯ `tuple` ä¸­æ‰€æœ‰å…ƒç´ çš„è”åˆç±»å‹ï¼Œå³ `1 | 'hello'`

### é¢˜ç›®ç­”æ¡ˆ

é€šè¿‡ `T[number]` è·å–åˆ° T æ‰€æœ‰å±æ€§çš„è”åˆç±»å‹ï¼Œå†é€šè¿‡ `in` è¿›è¡Œéå†ï¼š

```ts
type TupleToObject<T extends readonly any[]> = {
  [key in T[number]]: key
}
```

## ç»“è¯­

è¿™ä¸‰é“éƒ½æ˜¯ç®€å•éš¾åº¦çš„é¢˜ç›®ï¼Œä¸çŸ¥é“å¤§å®¶æŒ‘æˆ˜æƒ…å†µå¦‚ä½•å‘€ï¼Œæ¬¢è¿è¯„è®ºåŒºç•™è¨€ ğŸ‘€
